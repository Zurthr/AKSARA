generated by ai slop

# Community Platform Mock API

This project provides a complete mock REST API for a community platform with posts, communities, events, literature reads, and trending content. It's based on the actual Vue.js application structure in the codebase.

## Quick Start

### Prerequisites
- Node.js (v14 or higher)
- npm

### Installation
```bash
# Install dependencies
npm install

# Start the mock API server
npm run mock:server
```

The API will be available at `http://localhost:3002`

## Available Scripts

- `npm run mock:server` - Start JSON Server with full configuration (recommended)
- `npm run mock:simple` - Start basic JSON Server on port 3001
- `npm run mock:prod` - Start JSON Server in production mode (no file watching)

## API Endpoints

### Posts (Forums)
- `GET /api/posts` - Get all posts
- `GET /api/posts/:id` - Get specific post by ID
- `GET /api/posts/trending` - Get trending posts (sorted by stars)
- `GET /api/posts/community/:communityId` - Get posts from specific community
- `POST /api/posts` - Create new post (requires authentication)
- `PUT /api/posts/:id` - Update post (requires authentication)
- `DELETE /api/posts/:id` - Delete post (requires authentication)

### Communities
- `GET /api/communities` - Get all communities
- `GET /api/communities/:id` - Get specific community by ID
- `GET /api/communities/:id/posts` - Get posts from specific community
- `POST /api/communities` - Create new community (requires authentication)
- `PUT /api/communities/:id` - Update community (requires authentication)
- `DELETE /api/communities/:id` - Delete community (requires authentication)

### Events
- `GET /api/events` - Get all events
- `GET /api/events/:id` - Get specific event by ID
- `GET /api/events/upcoming` - Get upcoming events only
- `GET /api/events/community/:communityId` - Get events from specific community
- `POST /api/events` - Create new event (requires authentication)
- `PUT /api/events/:id` - Update event (requires authentication)
- `DELETE /api/events/:id` - Delete event (requires authentication)

### Books (Literature/Reads)
- `GET /api/books` - Get all books with comprehensive metadata (supports filtering with query params)
- `GET /api/books/:id` - Get specific book by ID
- `GET /api/books/:id/reviews` - Get all reviews for a specific book
- `POST /api/books` - Add new book (requires authentication)
- `PUT /api/books/:id` - Update book information (requires authentication)
- `DELETE /api/books/:id` - Delete book (requires authentication)

### Books Query Parameters
Use these parameters with `/api/books` for filtering and sorting:
- `?_sort=field&_order=asc|desc` - Sort books (fields: rating, total_bookmarked, title, author, year_edition, relevance)
- `?_limit=number` - Limit number of results
- `?_page=number` - Pagination
- `?q=search_term` - Basic full-text search in title and author
- `?search=search_term` - Enhanced smart search across multiple fields with relevance scoring
- `?tags.name=tagName` - Filter by exact tag name
- `?tags.name_like=partialTag` - Filter by partial tag match (e.g., tags.name_like=Web matches "Web Development")
- `?description_like=term` - Search within book descriptions
- `?author_like=term` - Search within author names
- `?copy_type=Physical|Online|Onsite Exclusive` - Filter by copy type
- `?licensing_type=Pay-to-own|Rent|Free` - Filter by licensing type
- `?rating_gte=number` - Filter by minimum rating (1-5)
- `?year_edition_like=year` - Filter by year
- `?user_preferences=tag1,tag2` - Filter by user preferences (comma-separated tags)
- `?recommend_for_user_id=id` - Get personalized recommendations for mock user (123, 456, 789, 101, 202)
- **Combinable**: `GET /api/books?_sort=rating&_order=desc&copy_type=Free&rating_gte=4`

### Smart Search & Relevance Scoring
The enhanced search provides intelligent results with relevance scoring:
- **Title matches**: Highest weight (10 points, +20 bonus for exact match)
- **Author matches**: High weight (8 points)
- **Tag matches**: Medium weight (5 points per tag)
- **Description matches**: Medium weight (2 points per occurrence, max 6)
- **Results sorted by relevance** when using `_sort=relevance`

### Reviews
- `GET /api/reviews` - Get all book reviews
- `GET /api/reviews/:id` - Get specific review by ID
- `GET /api/reviews/book/:bookId` - Get reviews for a specific book
- `GET /api/reviews/rating/:rating` - Get reviews with rating >= specified value
- `POST /api/reviews` - Create new review (requires authentication)
- `PUT /api/reviews/:id` - Update review (requires authentication)
- `DELETE /api/reviews/:id` - Delete review (requires authentication)

### Trending
- `GET /api/trending` - Get all trending topics
- `GET /api/trending/:category` - Get trending topics by category

### Search
- `GET /api/search/posts` - Search posts
- `GET /api/search/communities` - Search communities
- `GET /api/search/events` - Search events

## Query Parameters

### Filtering
```bash
# Filter posts by community
GET /api/posts?community_id=literacy-circle

# Filter events by status
GET /api/events?status=upcoming

# Books - Single filters
GET /api/books?copy_type=Physical
GET /api/books?licensing_type=Free
GET /api/books?rating_gte=4
GET /api/books?tags.name=Software%20Engineering

# Books - Combined filters
GET /api/books?_sort=rating&_order=desc&copy_type=Free&rating_gte=4

# Books - Trending books (sorted by bookmarks, limited to 10)
GET /api/books?_sort=total_bookmarked&_order=desc&_limit=10

# Books - Search by title or author
GET /api/books?q=clean%20code

# Books - Advanced filtering
GET /api/books?tags.name=Programming&licensing_type=Free&rating_gte=4&_limit=5

# Books - Smart search with relevance scoring
GET /api/books?search=php&_sort=relevance

# Books - Partial tag matching
GET /api/books?tags.name_like=Web&rating_gte=4

# Books - Personalized recommendations
GET /api/books?recommend_for_user_id=123

# Books - User preferences filtering
GET /api/books?user_preferences=Web%20Development,JavaScript

# Multiple filters for other resources
GET /api/posts?community_id=gaming-hub&stars_gte=50
```

### Sorting
```bash
# Sort books by rating descending
GET /api/books?_sort=rating&_order=desc

# Sort books by bookmark count descending
GET /api/books?_sort=total_bookmarked&_order=desc

# Sort posts by stars descending
GET /api/posts?_sort=stars&_order=desc

# Sort events by date ascending
GET /api/events?_sort=date&_order=asc

# Sort communities by member count
GET /api/communities?_sort=memberCount&_order=desc
```

### Pagination
```bash
# Get page 2 with 5 items per page
GET /api/books?_page=2&_limit=5

# Response will include pagination headers:
# X-Total-Count: 10
# X-Total-Pages: 2
# X-Current-Page: 2
# X-Per-Page: 5
```

### Full-text Search
```bash
# Search books by title or author
GET /api/books?q=clean%20code

# Search posts by content
GET /api/posts?q=photography

# Search communities by name or description
GET /api/communities?q=gaming

# Search events by title or location
GET /api/events?q=jakarta
```

## Authentication

For protected endpoints (POST, PUT, DELETE on resources), include a Bearer token:

```bash
curl -X POST http://localhost:3002/api/posts \
  -H "Authorization: Bearer your-token-here" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "New Post Title",
    "content": "This is my post content",
    "author": {
      "name": "John Doe",
      "avatar": "https://i.pravatar.cc/150?u=john",
      "tagline": "Community member"
    },
    "community_id": "literacy-circle"
  }'
```

## Example Requests

### Get All Books
```bash
curl http://localhost:3002/api/books
```

**Response:**
```json
[
  {
    "id": 1,
    "title": "Clean Code: A Handbook of Agile Software Craftsmanship",
    "author": "Robert C. Martin",
    "cover": "https://images-na.ssl-images-amazon.com/images/I/410LTdOvPAL._SX331_BO1,204,203,200_.jpg",
    "rating": 4.5,
    "tags": [
      { "name": "Software Engineering", "type": "primary" },
      { "name": "Programming", "type": "secondary" }
    ],
    "copy_type": "Physical",
    "licensing_type": "Pay-to-own",
    "total_bookmarked": 2847
  }
]
```

### Get Books by Tag
```bash
curl "http://localhost:3002/api/books?tags.name=Software%20Engineering"
```

### Get Trending Books
```bash
curl "http://localhost:3002/api/books?_sort=total_bookmarked&_order=desc&_limit=10"
```

### Advanced Filtering Example
```bash
curl "http://localhost:3002/api/books?copy_type=Free&rating_gte=4&_sort=rating&_order=desc"
```

### Search Books
```bash
curl "http://localhost:3002/api/books?q=clean%20code"
```

### Get All Posts
```bash
curl http://localhost:3002/api/posts
```

**Response:**
```json
[
  {
    "id": 1,
    "author": {
      "name": "Orang Kmplang",
      "avatar": "https://i.pravatar.cc/150?u=kmplang",
      "tagline": "A stupid one"
    },
    "timeAgo": "an hr ago",
    "title": "LF Best Books for Aspiring Web Developers",
    "content": "Hey everyone! I've been diving deeper into web development lately...",
    "tags": [
      { "label": "A Level", "type": "category" },
      { "label": "Web Dev", "type": "topic" }
    ],
    "stars": 80,
    "community_id": "literacy-circle",
    "created_at": "2023-10-01T12:00:00Z",
    "updated_at": "2023-10-01T12:00:00Z"
  }
]
```

### Get Communities
```bash
curl http://localhost:3002/api/communities
```

**Response:**
```json
[
  {
    "id": "literacy-circle",
    "name": "Literacy Circle",
    "icon": "heart",
    "accent": "#FFE5EC",
    "tags": ["Harry Potter", "LoTR", "Book Talk", "Reading"],
    "description": "Komunitas pecinta buku untuk diskusi sastra, review, dan menemukan penulis baru.",
    "members": "324",
    "postsToday": 18,
    "memberCount": 324,
    "isJoined": true,
    "created_at": "2023-08-15T12:00:00Z",
    "updated_at": "2023-10-01T12:00:00Z"
  }
]
```

### Get Trending Topics
```bash
curl http://localhost:3002/api/trending
```

### Get Upcoming Events
```bash
curl http://localhost:3002/api/events/upcoming
```

**Response:**
```json
[
  {
    "id": 1,
    "title": "New AI Tools for Developers",
    "category": "Technology",
    "heat": "Hot",
    "posts_count": 142,
    "engagement": "2.3k"
  }
]
```

### Get Upcoming Events
```bash
curl http://localhost:3001/api/events/upcoming
```

### Create New Community
```bash
curl -X POST http://localhost:3002/api/communities \
  -H "Authorization: Bearer mock-token-12345" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "JavaScript Developers",
    "description": "A community for JavaScript enthusiasts",
    "icon": "heart",
    "accent": "#E6F2FF",
    "tags": ["JavaScript", "Programming", "Web Dev"]
  }'
```

### Create New Book
```bash
curl -X POST http://localhost:3002/api/books \
  -H "Authorization: Bearer mock-token-12345" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "The Pragmatic Programmer",
    "author": "David Thomas, Andrew Hunt",
    "description": "A practical guide to programming best practices",
    "rating": 4.7,
    "copy_type": "Physical",
    "licensing_type": "Pay-to-own",
    "tags": [
      { "name": "Programming", "type": "primary" },
      { "name": "Software Development", "type": "secondary" }
    ],
    "access_links": [
      {
        "platform": "Amazon",
        "url": "https://amazon.com/pragmatic-programmer",
        "type": "purchase"
      }
    ]
  }'
```

### Create Book Review
```bash
curl -X POST http://localhost:3002/api/reviews \
  -H "Authorization: Bearer mock-token-12345" \
  -H "Content-Type: application/json" \
  -d '{
    "book_id": 1,
    "user_name": "John Developer",
    "rating": 5,
    "review": "Excellent book that changed my approach to coding!",
    "source": "Goodreads"
  }'
```

## Error Responses

### Authentication Required (401)
```json
{
  "success": false,
  "message": "Authentication required. Please provide a valid Bearer token."
}
```

### Validation Error (400)
```json
{
  "success": false,
  "message": "Post title is required and must be a non-empty string."
}
```

### Resource Not Found (404)
```json
{
  "success": false,
  "message": "Resource not found."
}
```

### Server Error (500)
```json
{
  "success": false,
  "message": "Internal server error. Please try again later."
}
```

## Data Structure

### Posts
```json
{
  "id": 1,
  "author": {
    "name": "Author Name",
    "avatar": "https://i.pravatar.cc/150?u=username",
    "tagline": "Author tagline"
  },
  "timeAgo": "2 hrs ago",
  "title": "Post Title",
  "content": "Post content",
  "tags": [
    { "label": "Category", "type": "category" },
    { "label": "#Topic", "type": "topic" }
  ],
  "stars": 42,
  "community_id": "community-slug",
  "created_at": "2023-10-01T12:00:00Z",
  "updated_at": "2023-10-01T12:00:00Z"
}
```

### Communities
```json
{
  "id": "community-slug",
  "name": "Community Name",
  "icon": "heart|spark|camera|chat",
  "accent": "#E6F2FF",
  "tags": ["Tag1", "Tag2"],
  "description": "Community description",
  "members": "1.2k",
  "postsToday": 24,
  "memberCount": 1200,
  "isJoined": false,
  "created_at": "2023-10-01T12:00:00Z",
  "updated_at": "2023-10-01T12:00:00Z"
}
```

### Events
```json
{
  "id": 1,
  "title": "Event Title",
  "community_id": "community-slug",
  "community_name": "Community Name",
  "date": "2023-10-15T08:00:00Z",
  "location": "Event Location",
  "description": "Event description",
  "attendees": [
    {
      "id": 1,
      "name": "Attendee Name",
      "avatar": "https://i.pravatar.cc/150?u=username"
    }
  ],
  "attendeeCount": 12,
  "maxAttendees": 20,
  "status": "upcoming|completed|cancelled",
  "created_at": "2023-10-01T12:00:00Z",
  "updated_at": "2023-10-01T12:00:00Z"
}
```

### Books (Enhanced Structure)
```json
{
  "id": 1,
  "title": "Clean Code: A Handbook of Agile Software Craftsmanship",
  "author": "Robert C. Martin",
  "cover": "https://images-na.ssl-images-amazon.com/images/I/410LTdOvPAL._SX331_BO1,204,203,200_.jpg",
  "description": "Even bad code can function. But if code isn't clean, it can bring a development organization to its knees.",
  "rating": 4.5,
  "year_edition": "2008",
  "total_bookmarked": 2847,
  "copy_type": "Physical",
  "licensing_type": "Pay-to-own",
  "tags": [
    { "name": "Software Engineering", "type": "primary" },
    { "name": "Programming", "type": "secondary" },
    { "name": "Best Practices", "type": "secondary" }
  ],
  "sources": [
    {
      "name": "IEEE Xplore",
      "url": "https://ieeexplore.ieee.org/document/6196583",
      "description": "Academic paper discussing clean code principles"
    }
  ],
  "twitter_embeds": [
    {
      "id": "1648999815",
      "text": "Just finished reading Clean Code by Robert Martin. Every developer should read this book! #CleanCode #Programming",
      "author": "TechLead",
      "author_handle": "@techlead",
      "likes": 1247,
      "retweets": 892,
      "created_at": "2023-09-15T14:30:00Z"
    }
  ],
  "access_links": [
    {
      "platform": "Amazon",
      "url": "https://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882",
      "type": "purchase"
    },
    {
      "platform": "O'Reilly",
      "url": "https://www.oreilly.com/library/view/clean-code-a/9780136083238/",
      "type": "read"
    }
  ],
  "created_at": "2023-10-01T12:00:00Z",
  "updated_at": "2023-10-01T12:00:00Z"
}
```

### Reviews
```json
{
  "id": 1,
  "book_id": 1,
  "user_name": "Sarah Chen",
  "user_avatar": "https://i.pravatar.cc/150?u=sarah",
  "rating": 5,
  "review": "This book fundamentally changed how I write code. Martin's principles are practical and immediately applicable.",
  "source": "Amazon Review",
  "verified_purchase": true,
  "helpful_count": 142,
  "created_at": "2023-09-28T16:45:00Z",
  "updated_at": "2023-09-28T16:45:00Z"
}
```

### Trending Topics
```json
{
  "id": 1,
  "title": "Trending Topic Title",
  "category": "Technology|Photography|Wellness|Gaming",
  "heat": "Hot|Trending|Rising",
  "posts_count": 142,
  "engagement": "2.3k"
}
```

## Development

### Configuration Files

- `db.json` - Main database file with all the mock data
- `routes.json` - Custom route mappings
- `middleware.js` - Custom middleware for authentication and validation
- `json-server.json` - Server configuration

### Adding New Data

To add more sample data, simply edit `db.json` and add entries to the appropriate arrays. The server will automatically reload with the new data.

### Custom Endpoints

Add new routes in `routes.json` following the pattern:
```json
{
  "/custom/endpoint": "/resource",
  "/api/nested/:id": "/resource?id=:id"
}
```

## Integration with Frontend

### Vue/Nuxt Integration
```javascript
// API composable
export const useApi = () => {
  const config = useRuntimeConfig()

  const apiCall = async (endpoint, options = {}) => {
    const url = `${config.public.apiBase}${endpoint}`

    const defaultOptions = {
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${config.public.apiToken}`
      }
    }

    return $fetch(url, { ...defaultOptions, ...options })
  }

  return { apiCall }
}

// Usage in components
const { apiCall } = useApi()

// Get posts
const posts = await apiCall('/api/posts')

// Create new post
const newPost = await apiCall('/api/posts', {
  method: 'POST',
  body: {
    title: 'My New Post',
    content: 'Post content here',
    author: {
      name: 'John Doe',
      avatar: 'https://i.pravatar.cc/150?u=john',
      tagline: 'Community member'
    }
  }
})
```

### React Example
```javascript
// API service
const api = {
  get: async (endpoint) => {
    const response = await fetch(`http://localhost:3001/api/${endpoint}`);
    return response.json();
  },

  post: async (endpoint, data) => {
    const response = await fetch(`http://localhost:3001/api/${endpoint}`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': 'Bearer mock-token-12345'
      },
      body: JSON.stringify(data)
    });
    return response.json();
  }
};

// Usage
const posts = await api.get('posts');
const communities = await api.get('communities');
const newPost = await api.post('posts', { title: 'New Post', content: '...' });
```

## Frontend Integration Examples

Based on your Vue.js components, here are the API calls you'll need:

### Index Page
```javascript
// Get posts for main feed
const posts = await $fetch('/api/posts')

// Get trending topics for sidebar
const trending = await $fetch('/api/trending')
```

### Community Page
```javascript
// Get all communities
const communities = await $fetch('/api/communities')

// Get community details
const community = await $fetch(`/api/communities/${communityId}`)

// Get posts from specific community
const communityPosts = await $fetch(`/api/communities/${communityId}/posts`)
```

### Events Page
```javascript
// Get all events
const events = await $fetch('/api/events')

// Get upcoming events only
const upcomingEvents = await $fetch('/api/events/upcoming')

// Get events from specific community
const communityEvents = await $fetch(`/api/events/community/${communityId}`)
```

### Literature Page
```javascript
// Get all books
const books = await $fetch('/api/books')

// Get trending books (sorted by bookmarks, limited to 10)
const trendingBooks = await $fetch('/api/books?_sort=total_bookmarked&_order=desc&_limit=10')

// === LITERATURE PAGE SPECIFIC EXAMPLES ===

// Top Web Development Books (High-rated, Web Development tag)
const topWebDevBooks = await $fetch('/api/books?tags.name=Web Development&rating_gte=4&_sort=rating&_order=desc&_limit=5')

// Most Bookmarked Web Development Books
const mostBookmarkedWebDev = await $fetch('/api/books?tags.name_like=Web&_sort=total_bookmarked&_order=desc&_limit=10')

// PHP Recommendations (Smart search across title, author, description, tags)
const phpRecommendations = await $fetch('/api/books?search=php&_sort=relevance&_limit=8')

// Personalized Recommendations for User (JavaScript + Frontend interests)
const personalizedRecs = await $fetch('/api/books?recommend_for_user_id=123')

// User Preferences Filtering (Web Development + JavaScript)
const userPreferenceBooks = await $fetch('/api/books?user_preferences=Web Development,JavaScript&_limit=6')

// === COMBINED FILTERING EXAMPLES ===

// Free, highly-rated programming books
const freeProgrammingBooks = await $fetch('/api/books?tags.name=Programming&licensing_type=Free&rating_gte=4')

// Beginner-friendly web development books
const beginnerWebDev = await $fetch('/api/books?tags.name_like=Web&rating_gte=4&_limit=5')

// Advanced backend development books
const advancedBackend = await $fetch('/api/books?description_like=advanced&tags.name=Backend&_sort=rating&_order=desc')

// JavaScript books (partial tag matching)
const jsBooks = await $fetch('/api/books?tags.name_like=JavaScript&_sort=rating&_order=desc')

// === SEARCH EXAMPLES ===

// Smart search for "Clean Code"
const cleanCodeSearch = await $fetch('/api/books?search=clean code&_sort=relevance')

// Search in descriptions only
const practicalBooks = await $fetch('/api/books?description_like=practical&rating_gte=4')

// Search by author
const robertMartinBooks = await $fetch('/api/books?author_like=Robert Martin')

// Get reviews for a specific book
const bookReviews = await $fetch(`/api/books/${bookId}/reviews`)
```

## Production Considerations

This mock API is designed for development and testing. For production:

1. Replace with a real backend API (Node.js/Express, Python/Django, etc.)
2. Implement proper authentication (JWT, OAuth, Passport.js)
3. Add database persistence (PostgreSQL, MongoDB, etc.)
4. Implement proper security measures (rate limiting, input sanitization)
5. Add real-time features (Socket.io for live updates)
6. Implement proper file upload handling

## Troubleshooting

### Port Already in Use
If port 3001 is already in use, you can change it in `json-server.json` or use a different port:
```bash
npx json-server --watch db.json --port 3002
```

### CORS Issues
The server includes CORS support. If you still experience CORS issues, ensure your frontend is running on a different port and check your browser's console for specific error messages.

### Authentication Errors
For testing, use any Bearer token with at least 10 characters:
```
Authorization: Bearer mock-token-12345
```

## License

This mock API setup follows the MIT License. Feel free to use it for your development and testing needs.
